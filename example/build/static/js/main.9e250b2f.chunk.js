(this["webpackJsonpstickerface-sdk-example"]=this["webpackJsonpstickerface-sdk-example"]||[]).push([[0],{15:function(e,n,t){},16:function(e,n,t){"use strict";t.r(n);t(6);var r=t(0),o=t.n(r),a=t(2),i=t.n(a),c=t(4),u=t(3),s=t.n(u),l="_1iB9z",d="_23Tb1",f="_2y_8m";var v=Object(r.memo)((function(e){var n=Object(r.useState)(),t=n[0],o=n[1];Object(r.useEffect)((function(){e.config&&o({selectedSections:e.config.selectedSections?"section="+e.config.selectedSections:"",excludedSections:e.config.excludedSections?"&excludedSections="+e.config.excludedSections:""})}),[e.config]);var a,i,c=e.setVisible;a=e.frameRef,i=function(){return c(!1)},Object(r.useEffect)((function(){function e(e){a.current&&!a.current.contains(e.target)&&i()}return document.addEventListener("mousedown",(function(n){return e(n)})),function(){document.removeEventListener("mousedown",(function(n){return e(n)}))}}),[a]),Object(r.useEffect)((function(){return function(){e.setLoad(!1)}}),[]);var u="?"+((null===t||void 0===t?void 0:t.selectedSections)||"")+((null===t||void 0===t?void 0:t.excludedSections)||"")+"&layers="+((null===e||void 0===e?void 0:e.layers)||"1;69;159;253;250;13;160;100;3040;265;76;3000;273;3200;90;28;23;203;11;68;219;83;35;");return Object(r.createElement)("iframe",{className:l,width:e.size.width,height:e.size.height,src:e.src+u,ref:e.frameRef,onLoad:function(){return e.setLoad(!0)}})}),(function(e,n){return e.visible===n.visible})),m=new Set;function E(e){var n=function(e){var n=e.eventName,t=e.callback,r=e.onError;return function(e){if("STICKERFACE_SDK_MESSAGE"===e.data.MESSAGE_IDENTIFIER&&e.data.eventName===n){if(void 0!==e.data.error&&"function"===typeof r)return r(e,e.data.error);b("Received: "+e.data.eventName+";"),t(e,e.data.data)}}}({eventName:e.eventName,callback:e.callback,onError:e.onError});return function(e){window.addEventListener("message",e,!1),m.add(e)}(n),function(){return function(e){m.has(e)&&(window.removeEventListener("message",e,!1),m.delete(e))}(n)}}function b(e){console.log("%c "+e,"color: #bada55;")}var S,g=function(){function e(){this.frame=null,this.unsubscribers=[]}var n=e.prototype;return n.setFrame=function(e){null!==e&&(this.frame=e)},n.onInit=function(){this.frame&&function(e){var n=e.target,t=e.eventName,r=e.data,o=e.targetOrigin,a=void 0===o?"*":o,i={MESSAGE_IDENTIFIER:"STICKERFACE_SDK_MESSAGE",eventName:t,error:e.error,data:r};n.postMessage(i,a),b("Send: "+i.eventName)}({data:"Frame initialised",target:this.frame,eventName:"sdk_init",targetOrigin:"*"})},n.addEventListener=function(e,n){var t=E({eventName:e,callback:n,onError:n});return this.unsubscribers.push(t),t},n.unsubscribeAll=function(){this.unsubscribers.forEach((function(e){e()}))},e}(),h=o.a.createContext({}),O=function(e){var n=o.a.useMemo((function(){return new g}),[]);return o.a.createElement(h.Provider,{value:{controller:n}},e.children)},N=function(e){var n=e.frame,t=e.isLoaded,o=Object(r.useContext)(h).controller;Object(r.useEffect)((function(){console.log(null!==n.current&&t,o),null!==n.current&&t&&(null===o||void 0===o||o.unsubscribeAll(),null===o||void 0===o||o.setFrame(n.current.contentWindow),null===o||void 0===o||o.addEventListener("iframe_init",e.onInit),null===o||void 0===o||o.addEventListener("layers_change",e.onChange),null===o||void 0===o||o.onInit())}),[n.current,t])};!function(e){e.SVG="svg",e.PNG="png"}(S||(S={}));var j=function(e){var n=Object(r.useState)(!1),t=n[0],o=n[1],a=Object(r.useRef)(null),i=Object(r.useState)(!1),c=i[0],u=i[1],l=Object(r.useState)(""),m=l[0],E=l[1],b=null!==e&&void 0!==e&&e.showButtonSaveAvatar?E:e.onChange?null===e||void 0===e?void 0:e.onChange:E;return N({isLoaded:c,onInit:e.onInit,onChange:b,frame:a}),Object(r.createElement)("div",{className:s()(d,e.className)},Object(r.createElement)(v,{src:"https://editor.stickerface.io",layers:e.layers,size:e.size,visible:t,frameRef:a,setLoad:function(e){return u(e)},setVisible:function(e){return o(e)},config:e.config}),(null===e||void 0===e?void 0:e.showButtonSaveAvatar)&&c&&Object(r.createElement)("button",{className:f,onClick:function(){var n;e.onSave&&e.onSave(null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.data)}},"Save Avatar"))},w=(t(15),function(){var e=Object(r.useState)(),n=Object(c.a)(e,2),t=n[0],a=n[1];return console.log(t),o.a.createElement("div",{className:"container"},o.a.createElement(O,null,o.a.createElement(j,{layers:t,size:{width:"100%",height:"100%"},onInit:function(){console.log("On init")},showButtonSaveAvatar:!0,onSave:function(e){a(e)}})))});i.a.createRoot(document.getElementById("root")).render(o.a.createElement(w,null))},5:function(e,n,t){e.exports=t(16)},6:function(e,n,t){}},[[5,1,2]]]);
//# sourceMappingURL=main.9e250b2f.chunk.js.map